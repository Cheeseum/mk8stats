/*! mk8stats - v0.1.0 - 2014-08-27
* Copyright (c) 2014 Cheeseum; License: MPL-2.0 */
function mergeStats(){for(var a={speed:{},handling:{}},b=arguments,c=0;c<b.length;c++)if(void 0!==b[c]){for(var d=0;d<statKeys.length;d++){var e=statKeys[d];a.hasOwnProperty(e)||(a[e]=0),a[e]+=b[c][e]}angular.forEach(b[c].speed,function(){}),angular.forEach(b[c].speed,function(d,e){void 0===a.speed[e]&&(a.speed[e]=0),void 0===a.handling[e]&&(a.handling[e]=0),a.speed[e]+=b[c].speed[e],a.handling[e]+=b[c].handling[e]})}return a}var mk8statsApp=angular.module("mk8statsApp",[]),statKeys=["accel","weight","traction","turbo"];mk8statsApp.controller("KartsCtrl",["$scope","$http",function(a,b){b.get("data/mk8data.json").success(function(b){a.gameData=b,a.addKart()}),a.karts=[],a.addKart=function(){kart={character:a.gameData.characters[0],body:a.gameData.bodies[0],wheels:a.gameData.wheels[0],glider:a.gameData.gliders[0]},a.karts.push(kart)}}]),mk8statsApp.controller("KartCtrl",["$scope",function(a){a.statKeys=statKeys,a.terrains=["Ground","Water","Air","Anti-Grav"],a.$watchCollection("kart",function(b){var c=b;void 0!==c&&(a.stats=mergeStats(a.gameData.weights[c.character.weight],c.body,c.wheels,c.glider))})}]).directive("statMeter",function(){return{restrict:"E",scope:{name:"@",value:"@",max:"@"},link:function(a){a.level=function(){var b=a.value/a.max;return.4>b?"low":.65>b?"mid":"high"}},templateUrl:"partials/stat-meter.html"}});